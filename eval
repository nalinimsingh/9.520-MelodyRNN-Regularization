#!/usr/bin/bash

CURR_DIRECTORY=${PWD}

# TFRecord file that contains SequenceExamples
EXAMPLES_TFRECORD=/tmp/melody_rnn/vanilla_sequence_examples
touch ${EXAMPLES_TFRECORD}

cd ${MAGENTAPATH}

bazel run //magenta/models/melody_rnn:melody_rnn_train -- \
  --config='basic_rnn' \
  --run_dir=/tmp/melody_rnn/logdir/$1 \
  --sequence_example_file=${EXAMPLES_TFRECORD}/training_melodies.tfrecord \
  --hparams="batch_size=64,rnn_layer_sizes=[64,64]" \
  --num_training_steps=20000 \
  --eval

cd ${CURR_DIRECTORY}
